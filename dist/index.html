<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Digital East Graphql</title>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <h1>REST in peace, long live GraphQL</h1>
          <aside class="notes">
            <ol>
              <li><strong>Introduce</strong></li>
              <li><strong>Last year using and exprimenting:</strong> query language for APIs called GraphQL</li>
              <li><strong>Sharing:</strong> Knowledge of the technology</li>
              <li><strong>And Sharing:</strong> Why it's a strong contender for new projects and breathing new life into existing projects at Neontribe</li>
            </ol>
          </aside>
        </section>
        <section>
          <section>
            <h2>What is GraphQL?</h2>
            <ul>
              <li>A query language for your API</li>
              <li>A server-side runtime for executing queries</li>
            </ul>
            <aside class="notes">
              <ol>
                <li><strong>When talking about GraphQL</strong> referring to two separate things</li>
                <li><strong>Schema</strong> a way of retrieving data</li>
                <li><strong>Runtime</strong> a way of resolving a query into data</li>
              </ol>
            </aside>
          </section>
          <section>
            <h3>Schema</h3>
            <pre><code class="language-graphql">
# A Person
type Person {
   id: Int
   name: String
   profile: Profile
   friends: [Person]
}
# A Profile
type Profile {
   url: String
   photo: String
}
type RootQueryType {
   attendees: [Person]
   person(
       # The id to look for
       id: Int
   ): Person
}
schema {
   query: RootQueryType
}
            </code></pre>
            <aside class="notes">
              <ol>
                <li><strong>Type ANATOMY</strong></li>
                <li><strong>Fields</strong> functionallity dependant data (3NF)</li>
                <li><strong>Relationships</strong> friends</li>
                <li><strong>Schema: Query, Mutate, Subscribe?</strong></li>
              </ol>
            </aside>
          </section>
          <section>
            <h3>Querying</h3>
            <div class="code">
            <pre style="width: 300px"><code class="language-graphql">
type RootQueryType {
   attendees: [Person]
   person(
       # The id to look for
       id: Int
   ): Person
}
            </code></pre>
            <pre style="width: 500px"><code class="language-graphql">
query {
  attendees {
    id
    name
    profile {
      picture
    }
    friends {
      name
      profile {
        picture
      }
    }
  }
}
            </code></pre>
            <aside class="notes">
              <ol>
                <li><strong>Against the schema previous slide</strong></li>
                <li><strong>Traversing the friendship graph</strong></li>
                <li><strong>Single query, single page</strong></li>
              </ol>
            </aside>
          </section>
          <section>
            <h3>Querying With Variables</h3>
            <div class="code">
            <pre style="width: 300px"><code class="language-graphql">
type RootQueryType {
   attendees: [Person]
   person(
       # The id to look for
       id: Int
   ): Person
}
            </code></pre>
            <pre style="width: 500px"><code class="language-graphql">
query MyQueryName ($idVariable: Int) {
  person(id: $idVariable) {
    profile {
      url
    }
  }
}
            </code></pre>
            </div>
            <aside class="notes">
              <ol>
                <li><strong>Against the schema previous slide</strong></li>
                <li><strong>Typed, Predictable</strong></li>
              </ol>
            </aside>
          </section>
          <section>
            <h3>Mutating and Subscribing</h3>
            <div class="code">
            <pre style="width: 300px"><code class="language-graphql">
# Schema
schema {
  query: RootQueryType
  mutation: RootMutationType
  subscription: RootSubscriptionType
}

type RootMutationType {
  updatePerson(
    id: Int
    person: PersonInput
  ): Person
}

type RootSubscriptionType {
  personChange: Person
}

# Person Input
type PersonInput {
  name: String
}
          </code></pre>
            <pre style="width: 500px"><code class="language-graphql">

# Query
mutation UpdatePersonExample ($person: PersonInput, $id: Int) {
  updatePerson(id: $id, person: $person) {
    # updatePerson resolves to a Person type
    id
    name
    friends {
      name
    }
  }
}

subscribe {
  personChange {
    id
    name
  }
}
            </code></pre>
            </div>
            <aside class="notes">
              <ol>
                <li><strong>Input / Outputs</strong></li>
                <li><strong>Mutations have side-effects</strong></li>
                <li><strong>Mutations describe what will change</strong></li>
                <li><strong>Subscriptions</strong></li>
              </ol>
            </aside>
          </section>
        </section>
        <section>
          <section>
            <h2>GraphQL in the stack</h2>
            <p>
              Not a database, a data resolver
            </p>
            <aside class="notes">
              <ol>
                <li><strong>NOT A DATABASE</strong></li>
              </ol>
            </aside>
          </section>
          <section>
            <h3>Where Does It Go?</h3>
            <div class="fragment">
              <p>Transport &rarr; GraphQL &rarr; Business Logic &rarr; Data Store</p>
            </div>
            <div class="fragment">
              <p>Transport &rarr; GraphQL &rarr; (REST/RPC) &rarr; Business Logic &rarr; Data Store</p>
            </div>
            <aside class="notes">
              <ol>
                <li><strong>After Transport</strong></li>
                <li><strong>After Before Business Logic</strong></li>
              </ol>
            </aside>
          </section>
          <section>
            <h3>Reference implementations</h3>
            <div class="code">
              <div>
                <h4>Server Libraries</h4>
                <ul>
                  <li>C# / .NET</li>
                  <li>Clojure</li>
                  <li>Elixir</li>
                  <li>Erlang</li>
                  <li>Go</li>
                  <li>Groovy</li>
                  <li>Java</li>
                  <li>JavaScript</li>
                  <li>PHP</li>
                  <li>Python</li>
                  <li>Scala</li>
                  <li>Ruby</li>
                </ul>
               </div>
              <div>
                <h4>Client Libraries</h4>
                <ul>
                  <li>C# / .NET</li>
                  <li>Go</li>
                  <li>Java/Android</li>
                  <li>JavaScript</li>
                  <li>Swift / Objective-C IOS</li>
                </ul>
              </div>
            </div>
            <aside class="notes">
              <ol>
                <li><strong>Defined as a specification</strong></li>
                <li><strong>GraphQL-js, Youshido's GraphQL</strong></li>
              </ol>
            </aside>
          </section>
        </section>
        <section>
          <section>
            <h2>Why GraphQL?</h2>
            <div class="fragment"
              <ul>
                <li>Fast initial load</li>
                <li>Minimal roundtrip requests</li>
              </ul>
            </div>
            <aside class="notes">
              <ol>
                <li><strong>Covered: an idea of GraphQL's role in your stack</strong></li>
                <li><strong>REST, SOAP</strong></li>
                <li><strong>What is important in a modern app</strong></li>
                <li><strong>Mobile phone: limited computing power</strong></li>
                <li><strong>Mobile networks: limited connectivity</strong></li>
                <li><strong>Best tool for the job</strong></li>
                <li><strong>bytes down the wire... XML</strong></li>
              </ol>
            </aside>
          </section>
          <section>
            <h3>Comparison with REST</h3>
            <div class="code">
            <pre style="width: 300px"><code class="language-rubbish">
/attendees
            </code></pre>
              <pre style="width: 300px"><code class="language-graphql">
query {
  attendees {
    id
    name
  }
}
              </code></pre>
            </div>
            <pre><code class="language-json">
[{
  "id": 1,
  "name": "Anthony",
  "profileId": 23
}]
            </code></pre>
          </section>
          <section>
            <h3>Comparisons...</h3>
            <div class="code">
            <pre style="width: 300px"><code class="language-rubbish">
/attendees?photoSize=100x100
            </code></pre>
            <pre style="width: 300px"><code class="language-graphql">
query {
  attendees {
    id
    name
    profile {
      url
      photo(size: "100x100")
    }
  }
}
            </code></pre>
            </div>
            <pre><code class="language-json">
[{
  "id": 1,
  "name": "Anthony",
  "profileId": 23,
  "profile": {
    "url": "profile/23",
    "photo": "data:image/jpeg;base64,SGVsbG8sIFdvcmxkIQ%3D%3D"
  }
}]
            </code></pre>
          </section>
          <section>
            <h3>Comparisons...</h3>
            <div class="code">
              <div style="width: 500px">
                <pre style="display:block"><code class="language-rubbish">
/attendees?photoSize=100x100&withFriends=1
                </code></pre>
                <pre style="display:block"><code class="language-rubbish">
/friends/1
                </code></pre>
                <pre style="display:block"><code class="language-rubbish">
/friends/1?photoSize=100x100
                </code></pre>
              </div>
            <pre style="width: 300px"><code class="language-graphql">
query {
  attendees {
    id
    name
    profile {
      url
      photo(size: "100x100")
    }
    friends {
      id
      name
      profile {
        url
        photo(size: "100x100")
      }
    }
  }
}
            </code></pre>
            </div>
            <pre><code class="language-json">
[{
  "id": 1,
  "name": "Anthony",
  "profileId": 23,
  "profile": {
    "url": "profile/23",
    "photo": "data:image/jpeg;base64,SGVsbG8sIFdvcmxkIQ%3D%3D"
  }
}]
            </code></pre>
            <aside class="notes">
            </aside>
          </section>
          <section>
            <h3>UX -> DX</h3>
            <pre><code class="language-json">
{
    "title": "Person",
    "type": "object",
    "properties": {
        "name": {
            "type": "string"
        },
    },
    "required": ["name"]
}
            </code></pre>
            <pre><code class="language-graphql">
# Description of Person type
type Person {
  # Description of name field
  name: String @deprecated(reason: "We will be splitting name into firstName and lastName fields.")
  firstName: String
  lastName: String
}
            </code></pre>
            <aside class="notes">
                <li><strong>Users get all the love, what about us developers</strong></li>
                <li><strong>Types: work with the schema as a tool</strong></li>
                <li><strong>Types: use a tool to build the schema</strong></li>
                <li><strong>Self documenting</strong></li>
            </aside>
          </section>
        </section>
        <section>
          <section>
            <h3>HOW?</h3>
            <p>How</p>
            <aside class="notes">
              <ol>
              </ol>
            </aside>
          </section>
          <section>
            <h3>New projects</h3>
            <aside class="notes">
              <ol>
              </ol>
            </aside>
          </section>
          <section>
            <h3>Existing projects</h3>
            <aside class="notes">
            </aside>
          </section>
        </section>
        <section>
          <h1>Fin</h1>
          <aside class="notes">
          </aside>
        </section>
      </div>
    </div>

    <script src="main.bundle.js"></script>
    <script src="notes.js"></script>
  </body>
</html>
